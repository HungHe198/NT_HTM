@{
    Layout = null;
}
@* PSEUDOCODE / PLAN:
   - Replace hardcoded href attributes with Razor tag-helper attributes (asp-controller, asp-action).
   - For each anchor currently using a path like "/X/Y" map to asp-controller="X" and asp-action="Y".
   - Preserve classes, icons and texts.
   - Keep the first link marked as active; other links remain non-active (you can add logic later to set active dynamically).
   - Ensure tag helpers are used so routing will generate correct URLs based on routing configuration.
*@

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Admin Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
    <style>
        html, body {
            height: 100%;
        }

        body {
            background: #f9fafb;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .sidebar {
            min-width: 220px;
            background: #fff;
            height: 100vh;
        }

            .sidebar .nav-link.active {
                background: #f4f6fb;
                color: #1976d2;
            }

            .sidebar .nav-link {
                color: #637381;
            }

                .sidebar .nav-link:hover {
                    background: #eef3fb;
                    color: #1976d2;
                }

                .sidebar .nav-link i {
                    margin-right: 10px;
                }

        .content {
            padding: 2rem;
        }

        .topbar {
            background: #fff;
            padding: 1rem 2rem;
            border-bottom: 1px solid #f0f0f0;
        }

        main.content {
            flex: 1 0 auto;
        }
    </style>
</head>
<body>
    @{
        var currentController = (ViewContext.RouteData.Values["controller"] as string) ?? string.Empty;
        var currentAction = (ViewContext.RouteData.Values["action"] as string) ?? string.Empty;
        Func<string, string?, string> isActive = (controller, action) =>
        string.Equals(currentController, controller, StringComparison.OrdinalIgnoreCase) &&
        (string.IsNullOrEmpty(action) || string.Equals(currentAction, action, StringComparison.OrdinalIgnoreCase))
        ? "active" : string.Empty;
    }
    <div class="d-flex flex-grow-1">
        <!-- Sidebar -->
        <nav class="sidebar d-flex flex-column p-3">
            <a href="/" class="mb-4 text-decoration-none">
                <img src="/images/logo.png" alt="Logo" style="height:32px;">
            </a>
            <div class="mb-4">
                <div class="fw-bold">Team 1 <span class="badge bg-light text-dark">Free</span></div>
            </div>
            <ul class="nav nav-pills flex-column mb-auto">
            <li><a asp-controller="Admin" asp-action="Index" class="nav-link @isActive("Admin", "RevenueDaily")"><i class="fa fa-chart-line"></i>Thống kê</a></li>
            <li><a asp-controller="RevenueStatistics" asp-action="Index" class="nav-link @isActive("RevenueStatistics", "Index")"><i class="fa fa-chart-bar"></i>Thống kê doanh thu</a></li>
            <li><a asp-controller="UserManagement" asp-action="Index" class="nav-link @isActive("UserManagement", "Index")"><i class="fa fa-users-cog"></i>Quản lý tài khoản</a></li>
                <li><a asp-controller="RolePermission" asp-action="Index" class="nav-link @isActive("RolePermission", "Index")"><i class="fa fa-user-shield"></i>Phân quyền</a></li>
                <li><a asp-controller="Customer" asp-action="Index" class="nav-link @isActive("Customer", "Index")"><i class="fa fa-users"></i>Khách hàng</a></li>
                <li><a asp-controller="Product" asp-action="Index" class="nav-link @isActive("Product", "Index")"><i class="fa fa-box"></i>Sản phẩm</a></li>
                <li><a asp-controller="Orders" asp-action="Index" class="nav-link @isActive("Orders", "Index")"><i class="fa fa-receipt"></i>Đơn hàng</a></li>
                <li><a asp-controller="Sales" asp-action="Index" class="nav-link @isActive("Sales", "Index")"><i class="fa fa-cash-register"></i>Bán hàng tại quầy</a></li>
                <li><a asp-controller="Voucher" asp-action="Index" class="nav-link @isActive("Voucher", "Index")"><i class="fa fa-ticket"></i>Mã giảm giá</a></li>
                <li><a asp-controller="PaymentMethods" asp-action="Index" class="nav-link @isActive("PaymentMethods", "Index")"><i class="fa fa-credit-card"></i>Phương thức thanh toán</a></li>
                <li><a asp-controller="Brand" asp-action="Index" class="nav-link @isActive("Brand", "Index")"><i class="fa fa-industry"></i>Nhà sản xuất</a></li>
                <li><a asp-controller="OriginCountry" asp-action="Index" class="nav-link @isActive("OriginCountry", "Index")"><i class="fa fa-globe"></i>Nơi sản xuất</a></li>
              
                @* <li><a asp-controller="NotFound" asp-action="Index" class="nav-link @isActive("NotFound", "Index")"><i class="fa fa-ban"></i>Not found</a></li> *@
            </ul>
            @*       <div class="mt-auto">
                <div class="text-muted small mb-2">More features?</div>
                <a href="#" class="btn btn-outline-primary w-100 mb-2">Upgrade to Pro</a>
            </div> *@
        </nav>
        <!-- Main Content -->
        <div class="flex-grow-1">
            <!-- Topbar -->
            <div class="topbar d-flex justify-content-end align-items-center">
                <div class="me-3">
                    <i class="fa fa-search"></i>
                </div>
                @* <div class="me-3">
                    <img src="/images/flag-uk.png" alt="EN" style="height:20px;">
                </div> *@
                @* <div class="me-3 position-relative">
                    <i class="fa fa-bell"></i>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">2</span>
                </div> *@
                @{
                    var errorMsg = TempData["Error"] as string;
                    var hasAnyMsg = !string.IsNullOrWhiteSpace(errorMsg);
                }
                <div class="dropdown me-3">
                    <button class="btn btn-sm btn-outline-secondary position-relative" type="button" data-bs-toggle="dropdown" aria-expanded="false" title="Thông báo">
                        <i class="fa fa-bell"></i>
                        @if (hasAnyMsg)
                        {
                            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">!</span>
                        }
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end p-0" style="min-width: 320px;">
                        <li class="p-2 border-bottom fw-semibold">Thông báo lỗi</li>
                        @if (hasAnyMsg)
                        {
                            <li><div class="px-3 py-2 small text-danger">@errorMsg</div></li>
                        }
                        else
                        {
                            <li><div class="px-3 py-2 small text-muted">Không có lỗi</div></li>
                        }
                    </ul>
                </div>
                <div>
                    <img src="/images/avatar.png" alt="User" class="rounded-circle" style="height:32px;">
                </div>
            </div>
            <!-- Page Content -->
            <main class="content">
                @RenderBody()
            </main>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    @RenderSection("Scripts", required: false)
</body>
</html>
