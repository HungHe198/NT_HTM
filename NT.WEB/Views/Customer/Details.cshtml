@model NT.SHARED.Models.Customer

@{
    ViewBag.Title = "Chi tiết khách hàng";
}

<div class="container-fluid py-4">
    <!-- HEADER -->
    <div class="mb-4">
        <div class="d-flex align-items-center justify-content-between mb-3">
      <div>
    <h1 class="h3 mb-0">Chi tiết Khách hàng</h1>
    <p class="text-muted small mb-0">Xem và quản lý thông tin khách hàng</p>
      </div>
  <a asp-action="Index" class="btn btn-secondary">
    <i class="bi bi-arrow-left"></i> Quay lại danh sách
  </a>
      </div>
    </div>

    <div class="row g-4">
        <!-- MAIN INFO CARD -->
      <div class="col-lg-8">
            <div class="card shadow-sm border-0">
       <div class="card-header bg-light">
     <h5 class="mb-0">Thông tin cơ bản</h5>
    </div>
                <div class="card-body">
     <div class="row g-3">
  <div class="col-md-6">
                 <label class="form-label fw-bold text-muted">Tên Khách hàng</label>
<p class="fs-5 fw-semibold">@(Model.User?.Fullname ?? "N/A")</p>
         </div>
            <div class="col-md-6">
                <label class="form-label fw-bold text-muted">Email</label>
        <p class="fs-5 fw-semibold">
          <a href="mailto:@(Model.User?.Email ?? "#")">@(Model.User?.Email ?? "N/A")</a>
    </p>
        </div>
                   <div class="col-md-6">
            <label class="form-label fw-bold text-muted">Số Điện thoại</label>
  <p class="fs-5 fw-semibold">
         <a href="tel:@(Model.User?.PhoneNumber ?? "#")">@(Model.User?.PhoneNumber ?? "N/A")</a>
     </p>
      </div>
       <div class="col-md-6">
            <label class="form-label fw-bold text-muted">Trạng thái Tài khoản</label>
     <p>
     <span class="badge @(Model.User?.Status == "Active" ? "bg-success" : "bg-secondary")">
         @(Model.User?.Status ?? "N/A")
         </span>
        </p>
       </div>
           <div class="col-md-6">
 <label class="form-label fw-bold text-muted">Ngày Sinh</label>
    <p class="fs-5">
              @if (Model.DoB.HasValue)
       {
      <span>@Model.DoB.Value.ToString("dd/MM/yyyy")</span>
             }
             else
     {
      <span class="text-muted">-</span>
      }
           </p>
        </div>
     <div class="col-md-6">
      <label class="form-label fw-bold text-muted">Giới Tính</label>
                   <p class="fs-5">
      @if (!string.IsNullOrWhiteSpace(Model.Gender))
       {
           <span class="badge bg-info">@Model.Gender</span>
}
           else
        {
<span class="text-muted">-</span>
         }
        </p>
        </div>
          </div>

         <!-- ADDRESS SECTION -->
             <div class="mt-4 pt-4 border-top">
       <h6 class="fw-bold text-primary mb-3">Địa chỉ</h6>
          <p class="fs-5 text-muted">
    @if (!string.IsNullOrWhiteSpace(Model.Address))
        {
      <span>@Model.Address</span>
     }
          else
        {
      <span class="text-muted">Chưa cập nhật</span>
          }
     </p>
          </div>
     </div>
            </div>
    </div>

      <!-- SIDE INFO CARD -->
        <div class="col-lg-4">
            <div class="card shadow-sm border-0 bg-light">
     <div class="card-body">
        <h5 class="card-title mb-3">Thông tin tài khoản</h5>
        <div class="row g-3">
        <div class="col-12">
  <label class="form-label fw-bold text-muted small">Mã Khách hàng</label>
            <p class="small">
      <code>@Model.Id</code>
    </p>
           </div>
       <div class="col-12">
   <label class="form-label fw-bold text-muted small">Mã Người dùng</label>
           <p class="small">
                <code>@Model.UserId</code>
          </p>
     </div>
          <div class="col-12 border-top pt-3">
     <label class="form-label fw-bold text-muted small">Vai trò</label>
        <p>
          <span class="badge bg-primary">
       @(Model.User?.Role?.Name ?? "Customer")
   </span>
    </p>
    </div>
             </div>
     </div>
            </div>

     <!-- ACTION BUTTONS -->
   <div class="card shadow-sm border-0 mt-3">
                <div class="card-body">
           <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-primary w-100 mb-2 fw-bold">
         <i class="bi bi-pencil"></i> Chỉnh sửa
         </a>
       <button class="btn btn-danger w-100 fw-bold" data-bs-toggle="modal" data-bs-target="#deleteModal">
     <i class="bi bi-trash"></i> Xóa
     </button>
     </div>
     </div>
        </div>
    </div>
</div>

<!-- Delete Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
       <div class="modal-header bg-danger text-white">
<h5 class="modal-title">Xác nhận xóa</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
 </div>
            <div class="modal-body">
          <p>Bạn có chắc muốn xóa khách hàng <strong>@(Model.User?.Fullname ?? "N/A")</strong>?</p>
  <p class="text-muted small">Email: <strong>@(Model.User?.Email ?? "N/A")</strong></p>
            </div>
    <div class="modal-footer">
       <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
        <a asp-action="Delete" asp-route-id="@Model.Id" class="btn btn-danger">Xóa</a>
            </div>
        </div>
    </div>
</div>
